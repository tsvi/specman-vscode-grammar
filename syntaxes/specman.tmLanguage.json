{
  "name": "specman",
  "scopeName": "source.specman",
  "patterns": [
    {"include": "#body_declaration" },
    {"include": "#out_of_body" }
  ],
  "repository": {
    "body_declaration": {
      "patterns": [
        {
          "begin": "<\\'",
          "beginCaptures": {
            "0": { "name": "punctuation.section.begin.body.specman" }
          },
          "end": "\\'>",
          "endCaptures": {
            "0": { "name": "punctuation.section.end.body.specman" }
          },
          "patterns": [
            { "include": "#package" },
            { "include": "#comment" },
            { "include": "#imports" },
            { "include": "#structs" },
            { "include": "#macros" },
            { "include": "#templates"},
            { "include": "#code"}
          ]
        }
      ]
    },
    "out_of_body": {
      "name": "comment.block.specman",
      "match": ".*"
    },
    "package": {
      "match": "\\b(package)\\s+(.*)(;)",
      "captures": {
        "1": {"name": "entity.name.namespace.specman"},
        "2": {"name": "entity.name.specman"},
        "3": {"name": "punctuation.terminator.specman"}
      }
    },
    "comment": {
      "patterns": [
        {
          "name": "comment.block.specman",
          "begin": "/\\*",
          "beginCaptures": {
            "0": {"name": "punctuation.definition.comment.begin.specman"}
          },
          "end": "\\*/",
          "endCaptures": {
            "0": {"name": "punctuation.definition.comment.end.specman"}
          }
        },
        {
          "match": "(//|--)(.*)",
          "captures": {
            "1": {"name": "comment.line.specman punctuation.definition.comment.specman"},
            "2": {"name": "comment.line.specman"}
          }
        }
      ]
    },
    "imports": {
      "match": "\\b(import)\\s+(.*)(;)",
      "captures": {
        "1": {"name": "keyword.control.import.specman"},
        "2": {"name": "entity.name.filename.specman"},
        "3": {"name": "punctuation.terminator.specman"}
      }
    },
    "structs": {
      "patterns": [
        {
          "begin": "\\b(struct|unit)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s+(like)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?))?\\s*(?:(\\bof\\b)\\s+(\\()\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(\\)))?\\s*(?:(implementing)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*)?\\s*(\\{)",
          "beginCaptures": {
            "0": {"name": "meta.class.declaration.specman"},
            "1": {"name": "keyword.declaration.class.specman"},
            "2": {"name": "entity.name.class.specman"},
            "3": {"name": "keyword.declaration.like.specman"},
            "4": {"name": "entity.other.inherited-class.specman"},
            "5": {"name": "keyword.declaration.specman"},
            "6": {"name": "punctuation.section.parens.begin.specman"},
            "7": {"name": "entity.other.template-argument.specman"},
            "8": {"name": "punctuation.section.parens.end.specman"},
            "9": {"name": "keyword.declaration.interface.specman"},
            "10": {"name": "storage.type.interface.specman"},
            "11": {"name": "storage.type.interface.specman"},
            "12": {"name": "punctuation.section.class.begin.specman"}
          },
          "contentName": "meta.class.body.specman",
          "end": "(\\})\\s*(;)",
          "endCaptures": {
            "1": {"name": "punctuation.section.class.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [ { "include": "#code" } ]
        },
        {
          "begin": "(\\bextend)(?:\\s+(?!implementing\\b|of\\b)((?:([a-zA-Z][a-zA-Z0-9_]*)(?:(')([a-zA-Z0-9_]+))?)))+(?:\\s+(\\bof\\b)\\s*(\\()\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*\\s*(\\)))?(?:\\s+(implementing)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*)?\\s*(\\{)",
          "beginCaptures": {
            "0": {"name": "meta.class.declaration.specman" },
            "1": {"name": "keyword.declaration.class.specman"},
            "2": {"name": "entity.name.class.specman"},
            "6": {"name": "keyword.declaration.specman"},
            "7": {"name": "punctuation.section.parens.begin.specman"},
            "8": {"name": "entity.other.template-argument.specman"},
            "9": {"name": "entity.other.template-argument.specman"},
            "10": {"name": "punctuation.section.parens.end.specman"},
            "11": {"name": "keyword.declaration.interface.specman"},
            "12": {"name": "storage.type.interface.specman"},
            "13": {"name": "storage.type.interface.specman"},
            "14": {"name": "punctuation.section.class.begin.specman"}
          },
          "contentName": "meta.class.body.specman",
          "end": "(\\})\\s*(;)",
          "endCaptures": {
            "1": {"name": "punctuation.section.class.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [ { "include": "#code" } ]
        },
        {
          "begin": "(\\bpackage\\s*)?(\\binterface)(?:\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?))(?:\\s+(like)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*)?\\s*(\\{)",
          "beginCaptures": {
            "0": {"name": "meta.class.declaration.specman"},
            "1": {"name": "entity.name.namespace.specman"},
            "2": {"name": "keyword.declaration.interface.specman"},
            "3": {"name": "entity.name.interface.specman"},
            "4": {"name": "keyword.declaration.like.specman"},
            "5": {"name": "storage.type.interface.specman"},
            "6": {"name": "storage.type.interface.specman"},
            "7": {"name": "punctuation.section.interface.begin.specman"}
          },
          "contentName": "meta.class.body.specman",
          "end": "(\\})\\s*(;)",
          "endCaptures": {
            "1": {"name": "punctuation.section.class.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [ { "include": "#code" } ]
        }
      ]
    },
    "macros": {
      "match": "^\\s*(\\bdefine\\b)\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_.:]+)?)\\b)",
      "name": "meta.preprocessor.macro.specman",
      "captures": {
        "1": {"name": "keyword.control.define.specman"},
        "2": {"name": "constant.other.specman"}
      }
    },
    "templates": {
      "patterns": [
        {
          "begin": "(package\\s+)?(template)\\s+(extend\\s+)?\\b(struct|unit|interface)\\b\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s+)(\\bof\\b)",
          "beginCaptures": {
            "0": {"name": "meta.class.declaration.template.specman"},
            "1": {"name": "entity.name.namespace.specman"},
            "2": {"name": "keyword.declaration.template.specman"},
            "3": {"name": "keyword.declaration.specman"},
            "4": {"name": "keyword.declaration.class.specman"},
            "5": {"name": "entity.name.class.template.specman"},
            "6": {"name": "keyword.declaration.specman"}
          },
          "end": "(\\})\\s*(;)",
          "endCaptures": {
            "1": {"name": "punctuation.section.class.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [
            { "include": "#comment" },
            {
              "begin": "(\\bconditions\\b)\\s*(\\{)",
              "beginCaptures": {
                "1": {"name": "keyword.declaration.specman"},
                "2": {"name": "punctuation.section.conditions.begin.specman"}
              },
              "end": "(\\})",
              "endCaptures": {
                "1": {"name": "punctuation.section.conditions.end.specman"}
              },
              "patterns": [
                { "include": "#template-params" },
                { "include": "#literals" }
              ]
            },
            {
              "begin": "\\{",
              "beginCaptures": { "0": {"name": "punctuation.section.class.begin.specman"} },
              "end": "(?=\\})",
              "contentName": "meta.class.body.specman",
              "patterns": [{ "include": "#code" }]
            },
            {
              "match": "\\b(like)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*",
              "captures": {
                "1": {"name": "keyword.declaration.like.specman"},
                "2": {"name": "entity.other.inherited-class.specman"},
                "3": {"name": "entity.other.inherited-class.specman"}
              }
            },
            {
              "match": "\\b(implementing)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*",
              "captures": {
                "1": {"name": "keyword.declaration.interface.specman"},
                "2": {"name": "storage.type.interface.specman"},
                "3": {"name": "storage.type.interface.specman"}
              }
            },
            { "include": "#priority-scopes" },
            { "include": "#default-scopes" }
          ]
        },
        {
          "begin": "(template)\\s+(extend)\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s+)(\\bof\\b)",
          "beginCaptures": {
            "0": {"name": "meta.class.declaration.template.specman"},
            "1": {"name": "keyword.declaration.template.specman"},
            "2": {"name": "keyword.declaration.specman"},
            "3": {"name": "entity.name.class.template.specman"},
            "4": {"name": "keyword.declaration.specman"}
          },
          "end": "(\\})\\s*(;)",
          "endCaptures": {
            "1": {"name": "punctuation.section.class.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [
            { "include": "#comment" },
            {
              "begin": "(\\bconditions\\b)\\s*(\\{)",
              "beginCaptures": {
                "1": {"name": "keyword.declaration.specman"},
                "2": {"name": "punctuation.section.conditions.begin.specman"}
              },
              "end": "(\\})",
              "endCaptures": {
                "1": {"name": "punctuation.section.conditions.end.specman"}
              },
              "patterns": [
                { "include": "#template-params" },
                { "include": "#literals" }
              ]
            },
            {
              "begin": "\\{",
              "beginCaptures": { "0": {"name": "punctuation.section.class.begin.specman"} },
              "end": "(?=\\})",
              "contentName": "meta.class.body.specman",
              "patterns": [{ "include": "#code" }]
            },
            {
              "match": "\\b(like)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*",
              "captures": {
                "1": {"name": "keyword.declaration.like.specman"},
                "2": {"name": "entity.other.inherited-class.specman"},
                "3": {"name": "entity.other.inherited-class.specman"}
              }
            },
            {
              "match": "\\b(implementing)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s*,\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?))*",
              "captures": {
                "1": {"name": "keyword.declaration.interface.specman"},
                "2": {"name": "storage.type.interface.specman"},
                "3": {"name": "storage.type.interface.specman"}
              }
            },
            { "include": "#priority-scopes" },
            { "include": "#default-scopes" }
          ]
        },
        {
          "name": "meta.class.declaration.template.specman",
          "begin": "(package\\s+)?(template)\\s+(extend\\s+)?\\b(numeric_type)\\b\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s+)(\\bof\\b)\\s*",
          "beginCaptures": {
            "1": {"name": "entity.name.namespace.specman"},
            "2": {"name": "keyword.declaration.template.specman"},
            "3": {"name": "keyword.declaration.specman"},
            "4": {"name": "keyword.declaration.class.specman"},
            "5": {"name": "entity.name.class.template.specman"},
            "6": {"name": "keyword.declaration.specman"}
          },
          "end": "(;)",
          "endCaptures": {
            "1": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [
            { "include": "#template-params" },
            {
              "match": "(:)\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)",
              "captures": {
                "1": {"name": "punctuation.separator.specman"},
                "2": {"name": "storage.type.class.specman"}
              }
            },
            {
              "match": "\\bof\\b",
              "name": "keyword.declaration.specman"
            },
            { "include": "#scalar-types" },
            {
              "match": ",",
              "name": "punctuation.separator.specman"
            },
            {
              "match": "\\(",
              "name": "punctuation.section.parens.begin.specman"
            },
            {
              "match": "\\)",
              "name": "punctuation.section.parens.end.specman"
            }
          ]
        }
      ]
    },
    "code": {
      "patterns": [
        { "include": "#member-declaration"},
        { "include": "#scalar-type-definition" },
        { "include": "#priority-scopes"},
        { "include": "#scalar-types" },
        { "include": "#when-inheritance" },
        { "include": "#checks" },
        { "include": "#constraint-def" },
        { "include": "#code-blocks" },
        { "include": "#methods"},
        { "include": "#default-scopes" }
      ]
    },
    "member-declaration": {
      "patterns": [
        {
          "match": "(?:(package|protected|private)\\s+)?(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(:)\\s*(\\blist\\s+of\\s*)?\\b(in|out|inout)\\b\\s+([a-z]+_port\\s+of)\\s",
          "captures": {
            "1": {"name": "storage.modifier.access.specman"},
            "2": {"name": "variable.other.member.specman"},
            "3": {"name": "punctuation.separator.type.specman"},
            "4": {"name": "storage.modifier.specman"},
            "5": {"name": "storage.modifier.direction.specman"},
            "6": {"name": "storage.type.specman"}
          }
        },
        {
          "match": "(?:(package|protected|private)\\s+)?(?:(static)\\s+)?(?:(const)\\s+)?([!|~])?\\s*(%)?\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(?:(?:\\[\\s*[a-zA-Z0-9_]+\\s*\\]\\s*)+)?(:)\\s*((?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?))\\s*(;|=)",
          "captures": {
            "1": {"name": "storage.modifier.access.specman"},
            "2": {"name": "storage.modifier.static.specman"},
            "3": {"name": "storage.modifier.const.specman"},
            "4": {"name": "punctuation.definition.variable.generation.specman"},
            "5": {"name": "punctuation.definition.variable.physical.specman"},
            "6": {"name": "variable.other.member.specman"},
            "7": {"name": "punctuation.separator.type.specman"},
            "8": {"name": "storage.type.specman"},
            "9": {"name": "punctuation.terminator.specman"}
          }
        },
        {
          "match": "(?:(package|protected|private)\\s+)?(?:(static)\\s+)?(?:(const)\\s+)?([!|~]\\s*)?(%)?\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(?:(?:\\[\\s*[a-zA-Z0-9_]+\\s*\\]\\s*)+)?(:)\\s*((?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*\\b(?:int|uint|longint|longuint|bit|nibble|byte|time|bool|numeric)(?:\\[\\s*\\S+\\s*\\.\\.\\s*\\S+\\s*\\])?\\s*(?:)?)\\s*",
          "captures": {
            "1": {"name": "storage.modifier.access.specman"},
            "2": {"name": "storage.modifier.static.specman"},
            "3": {"name": "storage.modifier.const.specman"},
            "4": {"name": "punctuation.definition.variable.generation.specman"},
            "5": {"name": "punctuation.definition.variable.physical.specman"},
            "6": {"name": "variable.other.member.specman"},
            "7": {"name": "punctuation.separator.type.specman"},
            "8": {"name": "storage.type.specman"}
          }
        },
        {
          "begin": "(?:(package|protected|private)\\s+)?(?:(static)\\s+)?(?:(const)\\s+)?([!|~]\\s*)?(%)?\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(:)\\s*(<)([a-zA-Z][a-zA-Z0-9_]*)(')(type|exp)(>)",
          "beginCaptures": {
            "1": {"name": "storage.modifier.access.specman"},
            "2": {"name": "storage.modifier.static.specman"},
            "3": {"name": "storage.modifier.const.specman"},
            "4": {"name": "punctuation.definition.variable.generation.specman"},
            "5": {"name": "punctuation.definition.variable.physical.specman"},
            "6": {"name": "variable.other.member.specman"},
            "7": {"name": "punctuation.separator.type.specman"},
            "8": {"name": "punctuation.separator.specman"},
            "9": {"name": "variable.parameter.template.specman"},
            "10": {"name": "punctuation.separator.specman"},
            "11": {"name": "keyword.declaration.specman"},
            "12": {"name": "punctuation.separator.specman"}
          },
          "end": "(;)",
          "endCaptures": {
            "1": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [{ "include": "#priority-scopes" }, { "include": "#default-scopes" }]
        },
        {
          "match": "(?:(package|protected|private)\\s+)?(?:(static)\\s+)?(?:(const)\\s+)?([!|~]\\s*)?(%)?\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(:)\\s*(?:((?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*)(?:\\b(?:([a-zA-Z][a-zA-Z0-9_]*)(?:(')([a-zA-Z0-9_]+))?)\\s+)*?((?:([a-zA-Z][a-zA-Z0-9_]*)(?:(')([a-zA-Z0-9_]+))?)))(?:\\s+(\\bis\\s+instance\\b))?\\s*(;|=)",
          "captures": {
            "1": {"name": "storage.modifier.access.specman"},
            "2": {"name": "storage.modifier.static.specman"},
            "3": {"name": "storage.modifier.const.specman"},
            "4": {"name": "punctuation.definition.variable.generation.specman"},
            "5": {"name": "punctuation.definition.variable.physical.specman"},
            "6": {"name": "variable.other.member.specman"},
            "7": {"name": "punctuation.separator.type.specman"},
            "8": {"name": "storage.modifier.specman"},
            "9": {"name": "constant.other.enum.specman"},
            "10": {"name": "punctuation.separator.determinant.specman"},
            "11": {"name": "variable.other.determinant.specman"},
            "13": {"name": "storage.type.class.specman"},
            "16": {"name": "storage.modifier.specman"},
            "17": {"name": "punctuation.terminator.specman"}
          }
        },
        {
          "match": "(?:(package|protected|private)\\s+)?(?:(static)\\s+)?(?:(const)\\s+)?([!|~]\\s*)?(%)?\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(:)\\s*(\\[\\s*)",
          "captures": {
            "1": {"name": "storage.modifier.access.specman"},
            "2": {"name": "storage.modifier.static.specman"},
            "3": {"name": "storage.modifier.const.specman"},
            "4": {"name": "punctuation.definition.variable.generation.specman"},
            "5": {"name": "punctuation.definition.variable.physical.specman"},
            "6": {"name": "variable.other.member.enum.specman"},
            "7": {"name": "punctuation.separator.type.specman"},
            "8": {"name": "punctuation.brackets.begin.specman"}
          },
          "patterns": [{"include": "#enum-values-declaration"}]
        },
        {
          "match": "(?:(static)\\s+)?(event)\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)(?:\\s+(is)\\s+(only)*)?",
          "captures": {
            "1": {"name": "storage.modifier.static.specman"},
            "2": {"name": "storage.type.specman"},
            "3": {"name": "variable.other.member.event.specman"},
            "4": {"name": "keyword.other.event.specman"},
            "5": {"name": "keyword.modifier.event.specman"}
          }
        }
      ]
    },
    "scalar-type-definition": {
      "patterns": [
        {
          "match": "\\b(type|extend)\\b\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(:)\\s*(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?\\s*)(?:\\[\\s*\\S+\\s*\\.\\.\\s*\\S+\\s*\\])?\\s*(?:)?",
          "captures": {
            "1": {"name": "keyword.declaration.specman"},
            "2": {"name": "storage.type.specman"},
            "3": {"name": "punctuation.separator.type.specman"},
            "4": {"name": "storage.type.specman"}
          }
        },
        {
          "contentName": "meta.type.enum.specman",
          "begin": "\\b(type|extend)\\b\\s+([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(:)\\s*(\\[\\s*)",
          "beginCaptures": {
            "1": {"name": "keyword.declaration.specman"},
            "2": {"name": "storage.type.enum.specman"},
            "3": {"name": "punctuation.separator.type.specman"},
            "4": {"name": "punctuation.brackets.begin.specman"}
          },
          "patterns": [
            { "include": "#enum-values-declaration"}
          ],
          "end": "(\\]\\s*)(\\(\\s*(bits|bytes)\\s*:\\s*[\\d\\*]+\\s*\\))?(\\s*;)",
          "endCaptures": {
            "1": {"name": "punctuation.brackets.end.specman"},
            "2": {"name": "meta.width-modifier.specman"},
            "3": {"name": "keyword.operator.width-modifier.specman"},
            "4": {"name": "punctuation.terminator.specman"}
          }
        }
      ]
    },
    "enum-values-declaration": {
      "patterns": [
        {
          "match": "(\\s*,)",
          "captures": {
            "1": {"name": "punctuation.separator.specman"}
          }
        },
        {
          "match": "(\\s*,)?(?:\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(=\\s*)?",
          "captures": {
            "1": {"name": "punctuation.separator.specman"},
            "2": {"name": "constant.other.enum.specman"},
            "3": {"name": "keyword.operator.assignment.specman"}
          }
        },
        { "include": "#literals" },
        { "include": "#operators" }
      ]
    },
    "priority-scopes": {
      "patterns": [
        { "include": "#comment" },
        { "include": "#literals" },
        { "include": "#template-params" },
        { "include": "#operators" },
        { "include": "#built-in-variables" },
        { "include": "#type-casting" },
        { "include": "#preprocessor" },
        { "include": "#built-in-function-calls" }
      ]
    },
    "literals" : {
      "patterns": [
        {
          "match": "\\b((?:\\d+)(')(?:[oO])[0-7xXzZuUlLhHwWnN]([0-7xXzZuUlLhHwWnN_]+)?)\\b",
          "captures": {
            "1": {"name": "constant.numeric.mvl.octal.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)(')(?:[dD])[0-9xXzZuUlLhHwWnN]([0-9xXzZuUlLhHwWnN_]+)?)\\b",
          "captures": {
            "1": {"name": "constant.numeric.mvl.decimal.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)(')(?:[hHxX])[0-9a-fA-FxXzZuUlLhHwWnN]([0-9a-fA-FxXzZuUlLhHwWnN_]+)?)\\b",
          "captures": {
            "1": {"name": "constant.numeric.mvl.hex.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)(')(?:[bB])[0-1xXzZuUlLhHwWnN]([0-1xXzZuUlLhHwWnN_]+)?)\\b",
          "captures": {
            "1": {"name": "constant.numeric.mvl.binary.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b(-?([0-9_]+[kKmMgGtT]?))\\b",
          "name": "constant.numeric.unsized.integer.specman"
        },
        {
          "match": "\\b(0(?:[bB])\\s*[0-1_xXzZ?]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.unsized.binary.specman"}
          }
        },
        {
          "match": "\\b(0(?:[xX])\\s*[0-9a-fA-F_xXzZ?]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.unsized.hex.specman"}
          }
        },
        {
          "match": "\\b(0(?:[oO])\\s*[0-9a-fA-F_xXzZ?]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.unsized.octal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)?(')(?:[dD])\\s*[0-9_]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.sized.integer.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)?(')(?:[bB])\\s*[0-1_]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.sized.binary.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)?(')(?:[hHxX])\\s*[0-9a-fA-F_]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.sized.hex.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b((?:\\d+)?(')(?:[oO])\\s*[0-7_]+)\\b",
          "captures": {
            "1": {"name": "constant.numeric.sized.octal.specman"},
            "2": {"name": "punctuation.separator.literal.specman"}
          }
        },
        {
          "match": "\\b([0-9][\\.0-9_]*(?:[eE][\\+\\-]?[0-9][0-9_]*))\\b",
          "captures": {
            "1": {"name": "constant.numeric.real.specman"}
          }
        },
        {
          "match": "\\b(TRUE|FALSE|NULL|UNDEF|MAX_INT|MIN_INT|MAX_LONGINT|MIN_LONGINT|MAX_UINT|MAX_LONGUINT|SN_M_E|SN_M_LOG2E|SN_M_LOG10E|SN_M_LN2|SN_M_LN10|SN_M_PI|SN_M_TWO_PI|SN_M_PI_2|SN_M_PI_4|SN_M_1_PI|SN_M_2_PI|SN_M_2_SQRTPI|SN_M_SQRT2|SN_M_SQRT1_2)\\b",
          "name": "constant.language.specman"
        },
        {
          "match": "0c\"[\\x20-\\x7E]\"",
          "name": "constant.character.literal.specman"
        },
        {"include": "#string"}
      ]
    },
    "template-params": {
      "patterns": [
        {
          "match": "(<)\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(\\'\\s*)\\b(type|exp)(\\s*>\\s*)(:\\s*)(int|uint|longint|longuint|bit|nibble|byte|time|bool|numeric)",
          "captures": {
            "1": {"name": "punctuation.separator.specman"},
            "2": {"name": "variable.parameter.template.specman"},
            "3": {"name": "punctuation.separator.specman"},
            "4": {"name": "keyword.declaration.specman"},
            "5": {"name": "punctuation.separator.specman"},
            "6": {"name": "punctuation.separator.specman"},
            "7": {"name": "storage.type.specman"}
          }
        },
        {
          "match": "(<)\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(\\'\\s*)\\b(type|exp)(\\s*>\\s*)(?:(:\\s*)(struct|interface|object|list|scalar|numeric|custom_numeric|enum|port))?",
          "captures": {
            "1": {"name": "punctuation.separator.specman"},
            "2": {"name": "variable.parameter.template.specman"},
            "3": {"name": "punctuation.separator.specman"},
            "4": {"name": "keyword.declaration.specman"},
            "5": {"name": "punctuation.separator.specman"},
            "6": {"name": "punctuation.separator.specman"},
            "7": {"name": "storage.type.category.specman"}
          }
        },
        {
          "match": "(<)\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(\\'\\s*)\\b(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(>)",
          "captures": {
            "1": {"name": "punctuation.separator.specman"},
            "2": {"name": "variable.parameter.template.specman"},
            "3": {"name": "punctuation.separator.specman"},
            "4": {"name": "keyword.declaration.specman"},
            "5": {"name": "punctuation.separator.specman"}
          }
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.word.specman",
          "match": "\\b(and|or|not|now|in|in_table)\\b"
        },
        {
          "name": "keyword.operator.logical.specman",
          "match": "(=>)"
        },
        {
          "name": "keyword.operator.comparison.specman",
          "match": "(===|!==|==|!=|>=|<=|>|<)"
        },
        {
          "name": "keyword.operator.comparison.specman",
          "match": "\\b(list_ptr==|!list_ptr=)\\b"
        },
        {
          "name": "keyword.operator.assignment.specman",
          "match": "(=|\\+=|-=|\\*=|:=)"
        },
        {
          "name": "keyword.operator.boolean.specman",
          "match": "(&&|\\|\\||!)"
        },
        {
          "name": "keyword.operator.arithmetic.specman",
          "match": "(-|\\+|\\*|/|%)"
        },
        {
          "name": "keyword.operator.shift.specman",
          "match": "(>>|<<)"
        },
        {
          "name": "keyword.operator.bitwise.specman",
          "match": "(&|\\||~|!|\\^)"
        },
        {
          "name": "keyword.operator.width-modifier.specman",
          "match": "\\bbits\\b|\\bbytes\\b"
        },
        {
          "name": "keyword.operator.accessor.event.specman",
          "match": "\\@"
        }
      ]
    },
    "built-in-variables": {
      "patterns": [
        {
          "match": "\\b(it|me|index|result)\\b",
          "captures": {
            "1": {"name": "variable.language.specman"}
          }
        }
      ]
    },
    "scalar-types": {
      "patterns": [
        {
          "match": "\\s*(\\b(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*\\b(?:int|uint|longint|longuint|bit|nibble|byte|time|bool|numeric)(?:\\[\\s*\\S+\\s*\\.\\.\\s*\\S+\\s*\\])?\\s*(?:)?)\\b",
          "captures": {
            "1": {"name": "storage.type.specman"}
          }
        }
      ]
    },
    "checks": {
      "patterns": [
        {
          "description": "10.1.1 - check [[name] that] bool-exp [[then] true-block] [else dut-error-action]",
          "begin": "\\b(check)\\b",
          "beginCaptures": {
            "0": {"name": "meta.check-def.specman"},
            "1": {"name": "keyword.statement.specman"}
          },
          "contentName": "meta.check-def.specman",
          "end": ";",
          "endCaptures": {
            "0": {"name": "meta.check-def.specman punctuation.terminator.specman"}
          },
          "patterns": [
            {
              "match": "(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s+)?(\\bthat\\b)",
              "captures": {
                "1": {"name": "entity.name.label.specman"},
                "2": {"name": "keyword.other.specman"}
              }
            },
            { "include": "#bool-exp" },
            {
              "begin": "\\b(then)\\b",
              "beginCaptures": {
                "1": {"name": "keyword.conditional.specman"}
              },
              "contentName": "meta.true-block.specman",
              "end": "}",
              "endCaptures": {
                "0": {"name": "punctuation.section.block.end.specman"}
              },
              "patterns": [
                {"include": "#code-blocks"}
              ]
            },
            {
              "match": "\\b(else)\\b",
              "name": "keyword.conditional.specman"
            },
            {"include": "#dut-error-action"}
          ]
        }
      ]
    },
    "dut-error-action": {
      "description": "10.1.2 - dut_error (message: exp, ...) [ action-block ]\ndut_errorf(format: string, item: exp, ...) [action-block]",
      "begin": "\\b(dut_error|dut_errorf)\\b\\s*(\\()",
      "beginCaptures": {
        "1": {"name": "support.function.builtin.specman"},
        "2": {"name": "punctuation.section.parens.begin.specman"}
      },
      "contentName": "meta.function-call.builtin.specman",
      "end": "(\\))",
      "endCaptures": {
        "1": {"name": "punctuation.section.parens.end.specman"}
      },
      "patterns": [
        {
          "match": "\\s*(,)",
          "name": "punctuation.separator.specman"
        },
        { "include": "#actions"}
      ]
    },
    "constraint-def": {
      "begin": "(\\bkeep\\b)\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s+(is)\\s+)?(\\bsoft\\b\\s)?\\s*",
      "beginCaptures": {
        "0": {"name": "meta.constraint-def.specman"},
        "1": {"name": "keyword.other.constraint.specman"},
        "2": {"name": "entity.name.label.specman"},
        "3": {"name": "keyword.other.constraint.specman"},
        "4": {"name": "keyword.modifier.constraint.specman"}
      },
      "end": ";",
      "endCaptures": {
        "0": {"name": "meta.constraint-def.specman punctuation.terminator.specman"}
      },
      "contentName": "meta.constraint-expression.specman",
      "patterns": [
        { "include": "#constraint-expression"}
      ]
    },
    "default-scopes": {
      "patterns": [
        {
          "name": "keyword.other.specman",
          "match": "\\b(soft|compute|new|evaluate|force|release)\\b"
        },
        {
          "name": "keyword.other.statement.specman",
          "match": "\\b(export|extend|template|on|expect|routine|specman|radix|ignore|illegal|traceable|untraceable|cover|using|count_only|trace_only|at_least|transition|item|ranges|cross|text|call|task|within)\\b"
        },
        {
          "name": "support.function.builtin.specman meta.function-call.builtin.specman",
          "match": "\\b(initialize|delayed|exit|finish|post_generate|pre_generate|wave_setup|setup|setup_test|finalize|finalize_test|extract_test|run_test|get_timescale|is_gui|print_stack_trace|simulator_exists|simulator_save|sn_plusargs_exists|sn_plusarg_value|pre_save|pre_restore|post_restore|remap_tick_access|set_config|lock|unlock|release|swap|value|stop_run|get_config|get_indices|exec)\\b"
        },
        {
          "name": "keyword.control.specman",
          "match": "\\b(until|repeat|while|for|from|to|step|each|do|break|continue|before|next|always|in|return|keeping|chosen_from)\\b"
        },
        {
          "name": "keyword.other.packing.specman",
          "match": "\\b(packing|low|high|network)\\b"
        },
        {
          "name": "keyword.conditional.specman",
          "match": "\\b(choose|matches|if|then|else|try|case|casex|casez|default)\\b"
        },
        {
          "name": "keyword.other.temporal.specman",
          "match": "\\b(cycle|sample|event|forever|wait|change|negedge|rise|fall|delay|sync|sim|true|detach|eventually|emit)\\b"
        },
        {
          "name": "keyword.other.define.specman",
          "match": "\\b(define|as|computed|verilog|vhdl|variable)\\b"
        },
        {
          "name": "keyword.other.singleton.specman",
          "match": "\\b(sys|global|utils|message_manager|tf_domain_manager|rf_manager)\\b"
        },
        {
          "name": "keyword.other.file.specman",
          "match": "\\b(files|load|ntv|source_ref|script|read|write)\\b"
        },
        {
          "name": "keyword.other.fsm.specman",
          "match": "\\b(initial|idle|others|posedge|clock|cycles)\\b"
        },
        {
          "name": "storage.modifier.specman",
          "match": "\\b(is\\s+instance|list\\s+of|attribute|::)\\b"
        },
        {
          "name": "keyword.declaration.specman",
          "match": "\\b(DPI-C|like|implementing|conditions|created_driver|created_kind|testflow|import_python|numeric_type|sequence)\\b"
        },
        {
          "name": "punctuation.terminator.specman",
          "match": "\\s*;"
        }
      ]
    },
    "code-blocks": {
      "patterns": [
        {
          "begin": "(\\bon\\b)\\s*([a-zA-Z](?:[a-zA-Z0-9_.:]+)?)\\s*(\\{)",
          "beginCaptures": {
            "1": {"name": "keyword.control.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "punctuation.section.block.begin.specman"}
          },
          "contentName": "meta.code_block.specman",
          "end": "(\\})\\s*(;)?",
          "endCaptures": {
            "1": {"name": "punctuation.section.block.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [{"include": "#actions"}]
        },
        {
          "begin": "(\\bfirst\\s+of|all\\s+of\\b)?\\s*(\\{)",
          "beginCaptures": {
            "1": {"name": "keyword.control.specman"},
            "2": {"name": "punctuation.section.block.begin.specman"}
          },
          "contentName": "meta.code_block.specman",
          "end": "(\\})\\s*(;)?",
          "endCaptures": {
            "1": {"name": "punctuation.section.block.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [{"include": "#actions"}]
        }
      ]
    },
    "actions": {
      "name": "meta.actions.specman",
      "patterns" : [
        { "include": "#priority-scopes" },
        { "include": "#inline-generation" },
        { "include": "#struct-allocation" },
        { "include": "#variable-declaration" },
        { "include": "#checks" },
        { "include": "#function-calls" },
        { "include": "#code-blocks" },
        { "include": "#default-scopes" }
      ]
    },
    "inline-generation": {
      "begin": "\\s+(gen)\\s+(?:(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?))",
      "beginCaptures": {
        "1": {"name": "keyword.other.gen.specman"},
        "2": {"name": "variable.other.specman"}
      },
      "pattern": [{"include": "#inline-generation-constraint"}],
      "end": "(;)",
      "endCaptures": {
        "1": {"name": "punctuation.terminator.specman"}
      }
    },
    "inline-generation-constraint": {
      "name": "meta.constraint.specman",
      "begin": "(\\bkeeping\\b)(\\s*\\{)",
      "beginCaptures": {
        "1": {"name": "keyword.other.constraint.specman"},
        "2": {"name": "punctuation.section.constraint_block.begin.specman"}
      },
      "contentName": "meta.inline-generation.specman",
      "end": "(\\})\\s*(;)",
      "endCaptures": {
        "1": {"name":  "punctuation.section.constraint_block.end.specman"},
        "2": {"name":  "punctuation.terminator.specman"}
      },
      "pattern": [{ "include": "#code"}]
    },
    "struct-allocation": {
      "match": "\\bnew\\b",
      "name": "meta.function-call.new.specman keyword.other.new.specman"
    },
    "variable-declaration": {
      "patterns": [
        {
          "match": "\\b(var|item)\\b\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(:)\\s*(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?\\s*)(?:\\[\\s*\\S+\\s*\\.\\.\\s*\\S+\\s*\\])?\\s*(?:)?",
          "captures": {
            "1": {"name": "keyword.declaration.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "punctuation.separator.type.specman"},
            "4": {"name": "storage.type.specman"}
          }
        },
        {
          "match": "(\\bvar\\b)\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(:)\\s*(\\[\\s*)",
          "captures": {
            "1": {"name": "keyword.declaration.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "punctuation.separator.type.specman"},
            "4": {"name": "punctuation.brackets.begin.specman"}
          },
          "patterns": {"include": "#enum-values-declaration"}
        },
        {
          "match": "(\\bvar\\b)\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*)(:=\\s*)",
          "captures": {
            "1": {"name": "keyword.declaration.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "keyword.operator.assignment.specman"}
          }
        }
      ]
    },
    "preprocessor": {
      "patterns": [
        {
          "begin": "\\s*(?:\\}\\s*)?(#\\s*(?:ifdef|ifndef|else))\\s*((?:`)?([a-zA-Z](?:[a-zA-Z0-9_]+)?))?(\\s+then\\b)?\\s*(\\{)",
          "beginCaptures": {
            "1": {"name": "keyword.control.import.specman"},
            "2": {"name": "variable.other.define.specman"},
            "4": {"name": "keyword.control.import.specman"},
            "5": {"name": "punctuation.section.block.begin.specman"}
          },
          "end": "\\}",
          "endCaptures": "punctuation.section.block.end.specman",
          "patterns": [
            { "include": "#imports" },
            { "include": "#structs" },
            { "include": "#code" }
          ]
        },
        {
          "match": "(\\bmethod_type\\b)\\s+\\b([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\b\\s*(?=\\()",
          "captures": {
            "1": {"name": "meta.function.method_type.specman keyword.declaration.specman"},
            "2": {"name": "meta.function.method_type.specman entity.name.function.specman"}
          }
        },
        {
          "match": "(#\\s*(?:undef))\\s*((?:`)?([a-zA-Z](?:[a-zA-Z0-9_]+)?))",
          "captures": {
            "1": {"name": "keyword.control.import.specman"},
            "2": {"name": "variable.other.define.specman"}
          }
        }
      ]
    },
    "string": {
      "begin": "(\")",
      "beginCaptures": {
        "1": {"name": "punctuation.definition.string.begin.specman"}
      },
      "name": "string.quoted.double.specman",
      "patterns": [
        {
          "match": "\\\\n|\\\\t|\\\\f|\\\\\"|\\\\\\\\|\\\\r",
          "name": "constant.character.escape.specman"
        }
      ],
      "end": "(\")",
      "endCaptures": {
        "1": {"name": "punctuation.definition.string.end.specman"}
      }
    },
    "constraint-expression": {
      "patterns": [
        {
          "match": "(?:\\s*([a-zA-Z](?:[a-zA-Z0-9_.:]+)?))\\.(reset_soft)",
          "captures": {
            "1":  {"name": "variable.other.specman"},
            "2":  {"name": "keyword.modifier.constraint.specman"}
          }
        },
        {
          "begin": "(\\bfor\\s+each\\b)\\s*(?:\\(\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*\\)\\s*)?(?:(\\busing\\s+index)\\s*\\(\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*\\)\\s*)?(in)\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_.:]+)?))\\s*(\\{)",
          "beginCaptures": {
            "1": {"name": "keyword.control.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "keyword.control.specman"},
            "4": {"name": "variable.other.specman"},
            "5": {"name": "keyword.control.specman"},
            "6": {"name": "variable.other.specman"},
            "7": {"name": "punctuation.section.block.begin.specman"}
          },
          "patterns": [ {"include": "#constraint-bool-expression"} ],
          "end": "\\}",
          "endCaptures": {
            "0": {"name": "punctuation.section.block.end.specman"}
          }
        },
        {
          "begin": "(all\\s+of\\b)\\s*(\\{)",
          "beginCaptures": {
            "1": {"name": "keyword.control.constraint.specman"},
            "2": {"name": "punctuation.section.block.begin.specman"}
          },
          "patterns": [ {"include": "#constraint-bool-expression"} ],
          "end": "\\}",
          "endCaptures": {
            "0": {"name": "punctuation.section.block.end.specman"}
          }
        },
        {
          "match": "(?:([a-zA-Z](?:[a-zA-Z0-9_.:]+)?)\\s*)(\\bbefore\\b)\\s*(?:([a-zA-Z](?:[a-zA-Z0-9_.:]+)?))",
          "captures": {
            "1":  {"name": "variable.other.specman"},
            "2":  {"name": "keyword.other.constraint.specman"},
            "3":  {"name": "variable.other.specman"}
          }
        },
        {
          "match": "(?:([a-zA-Z](?:[a-zA-Z0-9_.:]+)?))\\s+(==)\\s+(\\bselect\\b)",
          "captures": {
            "1":  {"name": "variable.other.specman"},
            "2":  {"name": "keyword.operator.comparison.specman"},
            "3":  {"name": "keyword.other.constraint.specman"}
          }
        },
        { "include": "#constraint-bool-expression" }
      ]
    },
    "constraint-bool-expression": {
      "patterns": [
        {
          "begin": "(=>\\s+)(all\\s+of\\b)?\\s*(\\{)",
          "beginCaptures": {
            "1": {"name": "keyword.operator.logical.specman"},
            "2": {"name": "keyword.control.constraint.specman"},
            "3": {"name": "punctuation.section.block.begin.specman"}
          },
          "end": "\\}",
          "endCaptures": {
            "0": {"name": "punctuation.section.block.end.specman"}
          },
          "patterns": [{ "include": "#constraint-bool-expression" }]
        },
        { "include": "#priority-scopes" },
        { "include": "#list-literals" },
        {
          "match": "([a-zA-Z](?:[a-zA-Z0-9_.:]+)?)",
          "name": "variable.other.specman"
        }
      ]
    },
    "built-in-function-calls": {
      "patterns": [
        {
          "begin": "\\s+(assert|print|start)\\b\\s*(\\()?",
          "beginCaptures": {
            "1": {"name": "support.function.builtin.specman"},
            "2": {"name": "punctuation.section.parens.begin.specman"}
          },
          "contentName": "meta.function-call.builtin.specman",
          "end": "(\\))?(;)",
          "endCaptures": {
            "1": {"name": "punctuation.section.parens.end.specman"},
            "2": {"name": "punctuation.terminator.specman"}
          },
          "patterns": [
            {
              "match": "\\s*(,)",
              "name": "punctuation.separator.specman"
            },
            { "include": "#actions"}
          ]
        },
        {
          "match": "(assert|warning|error|fatal|hex|dec|bin|quote|str_chop|str_empty|str_exactly|str_insensitive|str_join|str_len|str_lower|str_match|str_pad|str_replace|str_split|str_split_all|str_sub|str_upper|abs|odd|even|ilog2|ilog10|ipow|isqrt|div_round_up|bitwise_or|bitwise_nand|bitwise_xor|bitwise_nor|bitwise_xnor|dist_uniform|dist_normal|rdist_uniform|rdist_normal|messagef|message|appendf|append|dut_errorf|dut_error|out|outf|get_unit|get_all_units|get_enclosing_unit|try_enclosing_unit|set_unit|pack|unpack|all_values|full_set_of_values|set_of_values|to_specman_scale|from_specman_scale|to_specman_scale_trunc|from_specman_scale_trunc|to_real_specman_scale|from_real_specman_scale|double_to_specman_scale|double_from_specman_scale|read_only|value|sn_unique_id_for_struct|deep_copy|deep_compare|deep_compare_physical|bitwise_and|range|unsafe|set_check|set_check_by_name|set_check_by_cover_item|simulator_command|bind)\\s*(\\()",
          "captures": {
            "1": {"name": "support.function.builtin.specman"},
            "2": {"name": "punctuation.section.parens.begin.specman"}
          },
          "name": "meta.function-call.builtin.specman",
          "patterns": [ { "include": "#function-call-parameters" } ]
        },
        {
          "match": "([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\.(add|add0|clear|delete|fast_delete|insert|pop0|pop|push0|push|resize|all_different|apply|copy|count|exists|first|first_index|flatten|get_indices|has|is_a_permutation|is_all_iterations|is_empty|last|last_index|max|max_index|max_value|min|min_index|min_value|reverse|size|sort|sort_by_field|split|top0|top|unique|all|all_indices|and_all|or_all|average|product|sum|crc_8|crc_32|crc_32_flip|key|key_index|key_exists|pack_struct|external_type|hdl_convertor|hdl_expression|reset_soft|e_impl|driver|driver_delay|edge|inverse|pack_options|pli_access|pli_field_access|read_type|to_string|union|intersect|diff|size|uint_size|size_is_uint|min|max|int_min|int_max|min_is_int|max_is_int|uint_min|uint_max|min_is_uint|max_is_uint|get_all_ranges|collect_all_ranges|get_range|get_range_below|get_range_above|check|copy|get_printed_lines|do_print|extract|finalize|init|quit|run|rerun|agent_code|agent||analog_agent_code|analog_code|e_path|full_external_uvm_path|full_hdl_path|get_children|get_hdl_language|get_native_path_name|get_parent_unit|get_ports|get_ports_recursively|hdl_path|pack_options|per_inst_cover|short_name_path|short_name|short_name_style)\\s*(\\()",
          "captures": {
            "1": {"name": "variable.other.specman"},
            "2": {"name": "support.function.builtin.specman"},
            "3": {"name": "punctuation.section.parens.begin.specman"}
          },
          "name": "meta.function-call.builtin.specman",
          "patterns": [ { "include": "#function-call-parameters" } ]
        },
        {
          "match": "(\\bfor\\s+each\\b)\\s*(?:\\(\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*\\)\\s*)?(?:\\busing\\s+index\\s*\\(\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*\\)\\s*)?(in)\\s+(?:([a-zA-Z](?:[a-zA-Z0-9_.:]+)?))(?=\\s*\\{)",
          "captures": {
            "1": {"name": "keyword.control.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "variable.other.specman"},
            "4": {"name": "keyword.control.specman"},
            "5": {"name": "variable.other.specman"}
          }
        },
        {
          "match": "(\\bfor\\s+each\\b)\\s*(?:\\(\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*\\)\\s*)?(?:\\busing\\s+index\\s*\\(\\s*([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*\\)\\s*)?(in)\\s+",
          "captures": {
            "1": {"name": "keyword.control.specman"},
            "2": {"name": "variable.other.specman"},
            "3": {"name": "variable.other.specman"},
            "4": {"name": "keyword.control.specman"}
          }
        }
      ]
    },
    "type-casting": {
      "patterns": [
        {
          "begin": "\\.(as_a)\\s*(\\()",
          "beginCaptures": {
            "1": {"name": "keyword.other.type-casting.specman"},
            "2": {"name": "punctuation.section.parens.begin.specman"}
          },
          "contentName": "meta.type-casting.builtin.specman",
          "end": "(\\))",
          "endCaptures": {
            "1": "punctuation.section.parens.end.specman"
          },
          "patterns": [
            {
              "begin": "(\\()",
              "beginCaptures": {
                "1": {"name": "punctuation.section.parens.begin.specman"}
              },
              "end": "(\\))",
              "endCaptures": {
                "1": {"name": "punctuation.section.parens.end.specman"}
              },
              "patterns": [
                { "include": "#literals" },
                { "include": "#operators" }
              ]
            },
            {
              "match": "(?:\\b(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?)\\b)",
              "name": "storage.type.specman"
            },
            { "include": "#literals"  },
            { "include": "#operators" }
          ]
        },
        {
          "match": "\\btype\\b",
          "name": "keyword.other.constraint.specman"
        },
        {
          "match": "(\\bis\\s+(?:\\bnot\\b)?\\s*a)(?:\\s+((?:([a-zA-Z][a-zA-Z0-9_]*)(?:(')([a-zA-Z0-9_]+))?)))+",
          "captures": {
            "1": {"name": "keyword.other.type-casting.specman"},
            "2": {"name": "storage.type.specman"}
          }
        }
      ]
    },
    "function-calls": {
      "match": "(?=\\b([a-zA-Z](?:[a-zA-Z0-9_.:]+)?)\\b\\s*\\()",
      "patterns": [{"include": "#function-consume"}]
    },
    "function-consume": {
      "name": "meta.function-call.specman",
      "patterns": [
        {
          "match": "\\.(add|add0|clear|delete|fast_delete|insert|pop0|pop|push0|push|resize|all_different|apply|copy|count|exists|first|first_index|flatten|get_indices|has|is_a_permutation|is_all_iterations|is_empty|last|last_index|max|max_index|max_value|min|min_index|min_value|reverse|size|sort|sort_by_field|split|top0|top|unique|all|all_indices|and_all|or_all|average|product|sum|crc_8|crc_32|crc_32_flip|key|key_index|key_exists|pack_struct|external_type|hdl_convertor|hdl_expression|reset_soft|e_impl|driver|driver_delay|edge|inverse|pack_options|pli_access|pli_field_access|read_type|to_string|union|intersect|diff|size|uint_size|size_is_uint|min|max|int_min|int_max|min_is_int|max_is_int|uint_min|uint_max|min_is_uint|max_is_uint|get_all_ranges|collect_all_ranges|get_range|get_range_below|get_range_above)\\s*(\\()",
          "captures": {
            "1": {"name": "support.function.builtin.specman"},
            "2": {"name": "punctuation.section.parens.begin.specman"}
          },
          "patterns": [{"include": "#function-call-parameters"}]
        },
        {
          "match": "\\b([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\b\\s*(\\()",
          "captures": {
            "1": {"name": "variable.function.specman"},
            "2": {"name": "punctuation.section.parens.begin.specman"}
          },
          "patterns": [{"include": "#function-call-parameters"}]
        }
      ]
    },
    "function-call-parameters": {
      "end": "(\\))\\s*(?=;)?",
      "endCaptures": {
        "1": {"name": "punctuation.section.parens.end.specman"},
        "2": {"name": "punctuation.terminator.specman"}
      },
      "patterns": [
        {
          "match": "(,)",
          "name": "punctuation.separator.specman"
        },
        { "include": "#actions" }
      ]
    },
    "when-inheritance": {
      "begin": "^\\s*(when)\\b",
      "beginCaptures": {
        "0": {"name": "meta.class.declaration.specman" },
        "1": {"name": "keyword.declaration.class.specman"}
      },
      "end": "(\\})\\s*(;)",
      "endCaptures": {
        "1": {"name": "punctuation.section.class.end.specman"},
        "2": {"name": "punctuation.terminator.specman"}
      },
      "patterns": [
        { "include": "#when-inheritance-determinants" },
        { "include": "#when-inheritance-declaration-end" },
        { "include": "#when-inheritance-contents" }
      ]
    },
    "when-inheritance-determinants": {
      "begin": "\\b(?:([a-zA-Z][a-zA-Z0-9_]*)(?:(')([a-zA-Z0-9_]+))?)\\b",
      "beginCaptures": {
        "0": {"name": "meta.class.determinant.specman"},
        "1": {"name": "constant.other.enum.specman"},
        "2": {"name": "punctuation.separator.determinant.specman"},
        "3": {"name": "variable.other.determinant.specman"}
      },
      "end": "\\b[a-zA-Z](?:[a-zA-Z0-9_]+)?\\b(?=\\s*\\{)",
      "endCaptures": {
        "0": {"name": "entity.name.class.specman"}
      },
      "patterns": [
        {
          "match": "\\b(?:([a-zA-Z][a-zA-Z0-9_]*)(?:(')([a-zA-Z0-9_]+))?)\\b",
          "captures": {
            "0": {"name": "meta.class.determinant.specman"},
            "1": {"name": "constant.other.enum.specman"},
            "2": {"name": "punctuation.separator.determinant.specman"},
            "3": {"name": "variable.other.determinant.specman"}
          }
        }
      ]
    },
    "when-inheritance-contents": {
      "begin": "\\{",
      "beginCaptures": {
        "0": {"name": "punctuation.section.class.begin.specman"}
      },
      "contentName": "meta.class.body.specman",
      "end": "(?=\\})",
      "patterns": [ { "include": "#code" } ]
    },
    "methods": {
      "begin": "(package|protected|private)?\\s*(static\\s+)?(final\\s+)?\\s*\\b(?!of\\b)([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\b\\s*\\(",
      "beginCaptures": {
        "1": {"name": "storage.modifier.function.specman"},
        "2": {"name": "storage.modifier.function.specman"},
        "3": {"name": "storage.modifier.function.specman"},
        "4": {"name": "meta.method.identifier.specman entity.name.function.specman"}
      },
      "patterns": [
        { "include": "#template-params"},
        { "include": "#method-parameters"},
        { "include": "#method-declaration-end"},
        { "include": "#method-contents"}
      ],
      "end": "(\\})\\s*(;)",
      "endCaptures": {
        "1": {"name": "punctuation.section.method.end.specman"},
        "2": {"name": "punctuation.terminator.specman"}
      }
    },
    "method-parameters": {
      "begin": "\\(",
      "beginCaptures": {
        "0": {"name": "meta.method.parameters.specman punctuation.section.parens.begin.specman"}
      },
      "end": "(\\))\\s*(?:(:)\\s*(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?\\s*)(?:\\[\\s*\\S+\\s*\\.\\.\\s*\\S+\\s*\\])?\\s*(?:)?)?",
      "endCaptures": {
        "1": {"name": "meta.method.parameters.specman punctuation.section.parens.end.specman"},
        "2": {"name": "punctuation.separator.return-type.specman"},
        "3": {"name": "meta.method.return-type.specman storage.type.specman"}
      },
      "patterns": [
        {
          "match": "(?:([a-zA-Z](?:[a-zA-Z0-9_]+)?)\\s*(:)\\s*(?:(\\*)?(?:(?:list(?:\\s*key\\s*:\\s*[a-zA-Z](?:[a-zA-Z0-9_]+)?)?\\s+of\\s+))*(?:[a-zA-Z](?:[a-zA-Z0-9_]+)?\\s*)(?:\\[\\s*\\S+\\s*\\.\\.\\s*\\S+\\s*\\])?\\s*(?:)?))",
          "captures": {
            "0": {"name": "meta.method.parameters.specman"},
            "1": {"name": "variable.parameter.specman"},
            "2": {"name": "punctuation.separator.parameter.specman"},
            "3": {"name": "punctuation.accessor.parameter.specman"},
            "4": {"name": "storage.type.specman"}
          }
        },
        {
          "match": ",",
          "name": "meta.method.parameters.specman punctuation.separator.parameter.specman"
        },
        { "include": "#template-params"},
        { "include": "#literals"},
        { "include": "#operators"}
      ]
    },
    "method-declaration-end": {
      "patterns": [
        {
          "match": "(\\@)([a-zA-Z](?:[a-zA-Z0-9_]+)?)",
          "captures": {
            "1": {"name": "punctuation.accessor.event.specman"},
            "2": {"name": "keyword.control.function.event.specman"}
          }
        },
        {
          "match": "(is)\\s+(empty|undefined)\\s*(;)",
          "captures": {
            "1": {"name": "keyword.other.function.specman"},
            "2": {"name": "keyword.modifier.function.specman"},
            "3": {"name": "punctuation.terminator.specman"}
          }
        },
        {
          "match": "(is)\\s+(only|first|also)?\\s+(imported)\\s*(;)",
          "captures": {
            "1": {"name": "keyword.other.function.specman"},
            "2": {"name": "keyword.modifier.function.specman"},
            "3": {"name": "keyword.modifier.function.specman"},
            "4": {"name": "punctuation.terminator.specman"}
          }
        },
        {
          "match": "(is)\\s+(only|first|also)?",
          "captures": {
            "1": {"name": "keyword.other.function.specman"},
            "2": {"name": "keyword.modifier.function.specman"}
          }
        }
      ]
    },
    "method-contents": {
      "begin": "\\{",
      "beginCaptures": {
        "0": {"name": "punctuation.section.method.begin.specman"}
      },
      "contentName": "meta.method.body.specman",
      "patterns": [{ "include": "#actions" }],
      "end": "(?=\\})"
    },
    "list-literals": {
      "begin": "(\\{)",
      "beginCaptures": {
        "1": {"name": "punctuation.section.list-literal.begin.specman"}
      },
      "contentName": "meta.list-literal.specman",
      "end": "(\\})\\s*",
      "endCaptures": {
        "1": {"name": "punctuation.section.list-literal.end.specman"}
      },
      "patterns": [
        { "include": "#priority-scopes" },
        { "include": "#list-literals" },
        {
          "match": "(;)",
          "name": "punctuation.separator.specman"
        }
      ]
    }
  }
}
